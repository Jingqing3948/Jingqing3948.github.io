<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>大二 Web 课程大作业——小程序标点地图 | Jingqing3948 的博客</title><script>var config = </script><script>window.onload = ()=>{};</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.4.0/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="Jingqing3948 的博客" type="application/atom+xml">
</head><body style="background-image:url(https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg);"><div id="cursor-container"><div id="cursor-outer"></div><div id="cursor-effect"></div></div><header><nav><a href="/">Home</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1>大二 Web 课程大作业——小程序标点地图</h1><div id="post-info"><span>First Post:<div style="display:inline-block;width:90px"><time datetime="2026-02-11T16:00:00.000Z" id="date"> 2026-02-12</time></div></span><br><span>Last Update:<div style="display:inline-block;width:90px"><time datetime="2022-05-12T14:07:32.148Z" id="updated"> 2022-05-12</time></div></span></div></div><hr><div id="post-content"><p>本次小程序设计主要围绕 map 组件展开。</p>
<p>我们组设计了一款能够记录地图上的标点信息，并将自己的标点信息发布到帖子上的旅游类app。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Jingqing3948/DianJi_Demo">github 代码地址</a>，希望对你有所帮助~</p>
<p><img src="https://s1.328888.xyz/2022/05/12/HN6nM.png" alt="HN6nM.png"></p>
<p>小程序的主要功能就是记录地图上的标点信息，并上传到云数据库中；</p>
<p><img src="C:\Users\86138\Desktop\5月12日(2)_.gif" alt="5月12日(2)_"></p>
<p>以及编辑文章，把文章信息上传到云数据库中；</p>
<p><img src="C:\Users\86138\Desktop\5月12日_.gif" alt="5月12日_"></p>
<p>获取云数据库中的文章（最新发布的3篇）。</p>
<p><img src="C:\Users\86138\Desktop\5月12日(1)_.gif" alt="5月12日(1)_"></p>
<h1 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h1><p><img src="C:\Users\86138\Desktop\image-20220512182409012.png" alt="image-20220512182409012"></p>
<p>目前有两个数据库表。databasemarkers 存储本次记录中所有标点信息；databasearticles 存储该文章发布时间、文章标题、备注、内容以及对应的标点记录id（外键）。</p>
<h1 id="1-地图标点"><a href="#1-地图标点" class="headerlink" title="1. 地图标点"></a>1. 地图标点</h1><p>小程序自带的 map 组件中有一个属性 markers，是一个对象数组。只要把相应格式的对象数组传给 map 组件，就会自动在地图上标记出点的信息。</p>
<p><img src="C:\Users\86138\Desktop\image-20220512180341165.png" alt="image-20220512180341165"></p>
<p>wxml 文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- subkey 用于调整地图样式</span><br><span class="hljs-comment">经纬度 latitude longitude 信息是地图初始的中心点。</span><br><span class="hljs-comment">本例中，要传递给 map 组件的对象数组也命名为 markers，在 js 文件中获取数据后传递给 map--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">map</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;map&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">subkey</span>=<span class="hljs-string">&quot;DKEBZ-LKBW4-B3KUP-DYSCI-IG7OS-SQBJH&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">longitude</span>=<span class="hljs-string">&#x27;&#123;&#123;weidu&#125;&#125;&#x27;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">latitude</span>=<span class="hljs-string">&#x27;&#123;&#123;jingdu&#125;&#125;&#x27;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">scale</span>=<span class="hljs-string">&quot;10&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">layer-style</span>=<span class="hljs-string">&quot;1&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">show-location</span>=<span class="hljs-string">&quot;true&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">markers</span>=<span class="hljs-string">&quot;&#123;&#123;markers&#125;&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--每次点击添加标点按钮，就会获取当前位置信息，存入 markers 数组--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;default&quot;</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">&quot;recstart&quot;</span>&gt;</span><br>    添加标点<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--点击结束记录，将标点信息上传到数据库 databasemarkers 中，并跳转到文章编辑页面--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;default&quot;</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">&quot;recstop&quot;</span>&gt;</span><br>    添加标点<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>js 文件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> cnt=cnt+<span class="hljs-number">1</span><br><span class="hljs-keyword">const</span> db=wx.<span class="hljs-property">cloud</span>.<span class="hljs-property">database</span><br><span class="hljs-title class_">Page</span>(&#123;<br>    <span class="hljs-attr">data</span>: &#123;<br>        <span class="hljs-attr">jingdu</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-attr">weidu</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-attr">markers</span>: [],<br>    &#125;,<br>	<span class="hljs-attr">recstart</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span><br>        cnt = cnt + <span class="hljs-number">1</span><br>        wx.<span class="hljs-title function_">getLocation</span>(&#123;<br>            <span class="hljs-attr">altitude</span>: <span class="hljs-string">&#x27;altitude&#x27;</span>,<br>            <span class="hljs-attr">highAccuracyExpireTime</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-attr">isHighAccuracy</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;gcj02&#x27;</span>,<br>            <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br>                <span class="hljs-keyword">let</span> marker = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">markers</span><br>                marker.<span class="hljs-title function_">push</span>(&#123;<br>                    <span class="hljs-attr">id</span>: cnt-<span class="hljs-number">1</span>,<br>                    <span class="hljs-attr">latitude</span>: result.<span class="hljs-property">latitude</span>,<br>                    <span class="hljs-attr">longitude</span>: result.<span class="hljs-property">longitude</span>,<br>                    <span class="hljs-attr">width</span>: <span class="hljs-number">20</span>,<br>                    <span class="hljs-attr">height</span>: <span class="hljs-number">30</span><br>                &#125;)<br>                <span class="hljs-comment">// let pointobj = this.data.polyline[0].points</span><br>                <span class="hljs-comment">// console.log(pointobj)</span><br>                <span class="hljs-comment">// pointobj.push(</span><br>                <span class="hljs-comment">//   &#123;</span><br>                <span class="hljs-comment">// 	  latitude: result.latitude,</span><br>                <span class="hljs-comment">//     longitude: result.longitude,</span><br>                <span class="hljs-comment">//   &#125;</span><br>                <span class="hljs-comment">// )</span><br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(that.<span class="hljs-property">data</span>.<span class="hljs-property">markers</span>)<br>                that.<span class="hljs-title function_">setData</span>(&#123;<br>                    <span class="hljs-attr">jingdu</span>: result.<span class="hljs-property">latitude</span>,<br>                    <span class="hljs-attr">weidu</span>: result.<span class="hljs-property">longitude</span>,<br>                    <span class="hljs-attr">recmode</span>: <span class="hljs-number">1</span>,<br>                    <span class="hljs-attr">markers</span>: marker,<br>                    <span class="hljs-comment">// polyline:[&#123;</span><br>                    <span class="hljs-comment">//   points:pointobj</span><br>                    <span class="hljs-comment">// &#125;]</span><br>                &#125;)<br>            &#125;,<br>            <span class="hljs-comment">// fail: (res) =&gt; &#123;&#125;,</span><br>            <span class="hljs-comment">// complete: (res) =&gt; &#123;&#125;,</span><br>        &#125;)<br>    &#125;,<br>    <span class="hljs-attr">recstop</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span><br>      db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">&quot;databasemarkers&quot;</span>).<span class="hljs-title function_">add</span>(&#123;<br>        <span class="hljs-attr">data</span>:&#123;<br>          <span class="hljs-attr">markers</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">markers</span><br>        &#125;<br>      &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;数据添加成功！&quot;</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>        <span class="hljs-keyword">var</span> docstring=res.<span class="hljs-property">_id</span><br>        wx.<span class="hljs-title function_">navigateTo</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/pages/addarticle/addarticle?docstring=&#x27;</span>+docstring<br>      &#125;)<br>      &#125;)<br>      <br>    &#125;,<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 生命周期函数--监听页面加载</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) &#123;<br>        <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span><br>        wx.<span class="hljs-title function_">getLocation</span>(&#123;<br>            <span class="hljs-attr">altitude</span>: <span class="hljs-string">&#x27;altitude&#x27;</span>,<br>            <span class="hljs-attr">highAccuracyExpireTime</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-attr">isHighAccuracy</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;type&#x27;</span>,<br>            <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>                    <span class="hljs-attr">jingdu</span>: result.<span class="hljs-property">latitude</span>,<br>                    <span class="hljs-attr">weidu</span>: result.<span class="hljs-property">longitude</span><br>                &#125;)<br>            &#125;<br>            <span class="hljs-comment">// fail: (res) =&gt; &#123;&#125;,</span><br>            <span class="hljs-comment">// complete: (res) =&gt; &#123;&#125;,</span><br>        &#125;)<br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>

<h1 id="2-发布文章"><a href="#2-发布文章" class="headerlink" title="2. 发布文章"></a>2. 发布文章</h1><p><img src="C:\Users\86138\Desktop\image-20220512180751872.png" alt="image-20220512180751872"></p>
<p>添加完标点信息后，提示输入文章标题、备注、正文信息，点击提交，文章就会发布到 databasearticles 数据库中。</p>
<p>wxml：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputbox&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;line&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;border-top: 1px solid #e4e4e4;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>题目<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot; 请输入题目&quot;</span> <span class="hljs-attr">bindinput</span>=<span class="hljs-string">&quot;inputtitle&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;line&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>备注<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot; 请输入备注信息&quot;</span> <span class="hljs-attr">bindinput</span>=<span class="hljs-string">&quot;inputcomment&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;line-content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>正文<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot; 请输入正文&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span> <span class="hljs-attr">bindinput</span>=<span class="hljs-string">&quot;inputcontent&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>提交<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>js：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs css">const db=wx<span class="hljs-selector-class">.cloud</span><span class="hljs-selector-class">.database</span>()<br>Page(&#123;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 页面的初始数据</span><br><span class="hljs-comment">   */</span><br>  data: &#123;<br>    dataobj:&#123;<br>      comment:<span class="hljs-string">&quot;&quot;</span>,<br>      content:<span class="hljs-string">&quot;&quot;</span>,<br>      title:<span class="hljs-string">&quot;&quot;</span>,<br>      markersid:<span class="hljs-string">&quot;&quot;</span><br>    &#125;<br>  &#125;,<br>  inputtitle:<span class="hljs-built_in">function</span>(options)&#123;<br>    <span class="hljs-selector-tag">var</span> value=options<span class="hljs-selector-class">.detail</span><span class="hljs-selector-class">.value</span><br>    console<span class="hljs-selector-class">.log</span>(value)<br>    this<span class="hljs-selector-class">.setData</span>(&#123;<br>      title:value<br>    &#125;)<br>  &#125;,<br>  inputcomment:<span class="hljs-built_in">function</span>(options)&#123;<br>    <span class="hljs-selector-tag">var</span> value=options<span class="hljs-selector-class">.detail</span><span class="hljs-selector-class">.value</span><br>    console<span class="hljs-selector-class">.log</span>(value)<br>    this<span class="hljs-selector-class">.setData</span>(&#123;<br>      comment:value<br>    &#125;)<br>  &#125;,<br>  inputcontent:<span class="hljs-built_in">function</span>(options)&#123;<br>    <span class="hljs-selector-tag">var</span> value=options<span class="hljs-selector-class">.detail</span><span class="hljs-selector-class">.value</span><br>    console<span class="hljs-selector-class">.log</span>(value)<br>    this<span class="hljs-selector-class">.setData</span>(&#123;<br>      <span class="hljs-attribute">content</span>:value<br>    &#125;)<br>  &#125;,<br>  submit()&#123;<br>    <span class="hljs-selector-tag">var</span> mydate=new Date()<br>    db<span class="hljs-selector-class">.collection</span>(&quot;databasearticles&quot;)<span class="hljs-selector-class">.add</span>(&#123;<br>      data:&#123;<br>        <span class="hljs-attribute">content</span>:this.data.content,<br>        markersid:this.data.markersid,<br>        comment:this.data.comment,<br>        title:this.data.title,<br>        createdate:mydate<br>      &#125;<br>    &#125;)<span class="hljs-selector-class">.then</span>(res=&gt;&#123;<br>      console<span class="hljs-selector-class">.log</span>(&quot;数据添加成功！&quot;)<br>        console<span class="hljs-selector-class">.log</span>(res)<br>        wx<span class="hljs-selector-class">.navigateTo</span>(&#123;<br>          url: <span class="hljs-string">&#x27;/pages/success/success&#x27;</span>,<br>        &#125;)<br>    &#125;)<br>  &#125;,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 生命周期函数--监听页面加载</span><br><span class="hljs-comment">   */</span><br>  onLoad(options) &#123;<br>    <span class="hljs-selector-tag">var</span> docstring=options<span class="hljs-selector-class">.docstring</span><br>    console<span class="hljs-selector-class">.log</span>(docstring)<br>    this<span class="hljs-selector-class">.setData</span>(&#123;<br>      markersid:docstring<br>    &#125;)<br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>



<p>wxss：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.inputbox</span> &#123;<br>  <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">60</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">450</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.inputbox</span> <span class="hljs-selector-class">.line</span> &#123;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">min-height</span>:<span class="hljs-number">100</span>rpx;<br>  <span class="hljs-attribute">line-height</span>:<span class="hljs-number">100</span>rpx;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">30</span>rpx;<br>  <span class="hljs-attribute">border-bottom</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;<br>&#125;<br><br><span class="hljs-selector-class">.inputbox</span> <span class="hljs-selector-class">.line-content</span> &#123;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">min-height</span>:<span class="hljs-number">300</span>rpx;<br>  <span class="hljs-attribute">line-height</span>:<span class="hljs-number">160</span>rpx;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">30</span>rpx;<br>  <span class="hljs-attribute">border-bottom</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;<br>&#125;<br><br><span class="hljs-selector-class">.inputbox</span> <span class="hljs-selector-class">.line</span> <span class="hljs-selector-tag">label</span> &#123;<br>  <span class="hljs-attribute">float</span>: left;<br>&#125;<br><br><span class="hljs-selector-class">.inputbox</span> <span class="hljs-selector-class">.line-content</span> <span class="hljs-selector-tag">label</span> &#123;<br>  <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:left</span>;<br>&#125;<br><br><span class="hljs-selector-class">.inputbox</span> <span class="hljs-selector-class">.line</span> <span class="hljs-selector-tag">input</span> &#123;<br>  <span class="hljs-attribute">height</span>:<span class="hljs-number">100</span>rpx;<br>  <span class="hljs-attribute">line-height</span>:<span class="hljs-number">100</span>rpx;<br>  <span class="hljs-attribute">float</span>: left;<br>  <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">40</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.inputbox</span> <span class="hljs-selector-class">.line-content</span> <span class="hljs-selector-tag">input</span> &#123;<br>  <span class="hljs-attribute">width</span>:<span class="hljs-number">80%</span>;<br>  <span class="hljs-attribute">height</span>:<span class="hljs-number">140</span>rpx;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">140</span>rpx;<br>  <span class="hljs-attribute">float</span>: left;<br>  <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">40</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.submit</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>	<span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;<br>	<span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>	<span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>	<span class="hljs-attribute">margin</span>: <span class="hljs-number">180</span>rpx auto <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">98</span>rpx;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">3</span>rpx solid <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">167</span>);<br>  <span class="hljs-attribute">color</span>:<span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">167</span>);<br>	<span class="hljs-attribute">display</span>: flex;<br>	<span class="hljs-attribute">flex-direction</span>: row;<br>	<span class="hljs-attribute">align-items</span>: center;<br>	<span class="hljs-attribute">justify-content</span>: center;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="3-获取最新发布的三篇文章"><a href="#3-获取最新发布的三篇文章" class="headerlink" title="3. 获取最新发布的三篇文章"></a>3. 获取最新发布的三篇文章</h1><p><img src="C:\Users\86138\Desktop\image-20220512183340511.png" alt="image-20220512183340511"></p>
<p>最新发布模块可以获取云数据库中最新发布的三篇文章，原理是根据时间戳倒叙排序后取前三条记录。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">&quot;databasearticles&quot;</span>)<br>      .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">&#x27;createdate&#x27;</span>,<span class="hljs-string">&#x27;desc&#x27;</span>)<br>      .<span class="hljs-title function_">limit</span>(<span class="hljs-number">3</span>)<br>      .<span class="hljs-title function_">get</span>(&#123;<br>        <span class="hljs-attr">success</span>:<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>            <span class="hljs-attr">new3obj</span>:res.<span class="hljs-property">data</span><span class="hljs-comment">//new3obj 是在 data 中定义的，用来接收最新发布的三篇文章对象集合的变量</span><br>          &#125;)<br>        &#125;<br>      &#125;)<br></code></pre></td></tr></table></figure>

<p>以上就是本小程序核心功能啦！希望对你有帮助！</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div id="footer-link" style="left: 50%;order: 0;border-left: 1px solid #fe2;padding-right: unset;max-width: calc(50% - 5px);"><a href="/2022/06/29/Python%20%E7%88%AC%E8%99%AB%E5%85%A5%E9%97%A8_1/"> Prev →</a></div></div></div><details id="reward"><summary>打赏</summary><div id="alipay"><span>支付宝 | Alipay</span><br><img src="/img/Alipay.png"></div><div id="wechat"><span>微信 | WeChat</span><br><img src="/img/WeChat.png"></div></details></div><div id="bottom-btn"><a id="to-top" onClick="index.scrolltop();" title="to top">∧</a></div></article><div class="aside-box"><aside><div id="aside-top"><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Jing Qing</a></h1><div id="description"><p></p></div><!--if page.published === undefined--><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">48</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">3</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">10</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="toc-div"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.</span> <span class="toc-text">数据库设计</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%9C%B0%E5%9B%BE%E6%A0%87%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">1. 地图标点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0"><span class="toc-number">3.</span> <span class="toc-text">2. 发布文章</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E6%9C%80%E6%96%B0%E5%8F%91%E5%B8%83%E7%9A%84%E4%B8%89%E7%AF%87%E6%96%87%E7%AB%A0"><span class="toc-number">4.</span> <span class="toc-text">3. 获取最新发布的三篇文章</span></a></li></ol></div></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">1970 to 2020</span></nobr><br><nobr><span class="text-title">ICP</span><span class="text-content">——备案号——</span></nobr><br><text>published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></text><text> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight</a></text><wbr><text>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></text></footer></aside></div><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="//unpkg.com/@highlightjs/cdn-assets@11.4.0/highlight.min.js"></script></main></body></html>